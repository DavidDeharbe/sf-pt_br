<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>MoreCoq</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">MoreCoq</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">MoreCoq: Mais Acerca das Táticas de Coq</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">Poly</span>.<br/>

<br/>
</div>

<div class="doc">
Este capítulo apresenta várias outras estratégias e táticas de prova que,
    juntas, permitem-nos provar teoremas sobre os programas funcionais que temos
    escrito. Em particular, nós vamos raciocinar sobre funções que manipulam
    números naturais e listas.

<div class="paragraph"> </div>

    Em particular, nós vamos ver:

<div class="paragraph"> </div>

<ul class="doclist">
<li> Como usar lemas auxiliares, em ambos os raciocínios, progressivo 
      e regressivo;

</li>
<li> Como raciocinar a respeito de construtores de dados, os quais são 
      injetivos e disjuntos;

</li>
<li> Como criar uma hipótese de indução forte (e quando fortificar é
      necessário); e

</li>
<li> Como raciocinar por análise de caso.

</li>
</ul>
 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab2"></a><h1 class="section">A tática <span class="inlinecode"><span class="id" title="tactic">apply</span></span> ( aplique)</h1>

<div class="paragraph"> </div>

 Nós usualmente encontraremos situações onde a meta a ser provada é
    exatamente igual a alguma hipótese no contexto ou algum
    lema provado anteriormente. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly1</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">o</span> <span class="id" title="var">p</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> = <span class="id" title="var">m</span>  →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">n</span>;<span class="id" title="var">o</span>] = [<span class="id" title="var">n</span>;<span class="id" title="var">p</span>] →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">n</span>;<span class="id" title="var">o</span>] = [<span class="id" title="var">m</span>;<span class="id" title="var">p</span>].<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">o</span> <span class="id" title="var">p</span> <span class="id" title="var">eq1</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq1</span>.<br/>
 <span class="id" title="tactic">apply</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A tática do <span class="inlinecode"><span class="id" title="tactic">apply</span></span> também funciona com hipótese <i>condicional</i> e lemas: se a
    sentença que está sendo aplicada é uma implicação, então as premissas desta
    implicação serão inseridas na lista de submetas que precisam ser
    provadas. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly2</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">o</span> <span class="id" title="var">p</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> = <span class="id" title="var">m</span>  →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> (<span class="id" title="var">q</span> <span class="id" title="var">r</span> : <span class="id" title="var">nat</span>), <span class="id" title="var">q</span> = <span class="id" title="var">r</span> → [<span class="id" title="var">q</span>;<span class="id" title="var">o</span>] = [<span class="id" title="var">r</span>;<span class="id" title="var">p</span>]) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">n</span>;<span class="id" title="var">o</span>] = [<span class="id" title="var">m</span>;<span class="id" title="var">p</span>].<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">o</span> <span class="id" title="var">p</span> <span class="id" title="var">eq1</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eq2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eq1</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Você pode achar instrutivo observar esta prova e ver se há uma maneira de
    completá-la usando apenas <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> em vez de <span class="inlinecode"><span class="id" title="tactic">apply</span></span>.
<div class="paragraph"> </div>

 Tipicamente, quando usamos <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>, a sentença <span class="inlinecode"><span class="id" title="var">H</span></span> começará com um
    <span class="inlinecode"><span class="id" title="keyword">∀</span></span> ligando algumas <i>variáveis universais</i>. Quando o Coq casa a meta
    atual com a conclusão de <span class="inlinecode"><span class="id" title="var">H</span></span>, ele tenta encontrar os valores apropriados
    para estas variáveis. Por exemplo, quando aplicamos <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">eq2</span></span> na prova
    abaixo, a variável universal <span class="inlinecode"><span class="id" title="var">q</span></span> em <span class="inlinecode"><span class="id" title="var">eq2</span></span> é instanciada com <span class="inlinecode"><span class="id" title="var">n</span></span> e <span class="inlinecode"><span class="id" title="var">r</span></span> é
    instanciada com <span class="inlinecode"><span class="id" title="var">m</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly2a</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span>,<span class="id" title="var">n</span>) = (<span class="id" title="var">m</span>,<span class="id" title="var">m</span>)  →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> (<span class="id" title="var">q</span> <span class="id" title="var">r</span> : <span class="id" title="var">nat</span>), (<span class="id" title="var">q</span>,<span class="id" title="var">q</span>) = (<span class="id" title="var">r</span>,<span class="id" title="var">r</span>) → [<span class="id" title="var">q</span>] = [<span class="id" title="var">r</span>]) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">n</span>] = [<span class="id" title="var">m</span>].<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">eq1</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eq2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eq1</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab3"></a><h4 class="section">Exercício: nível 2, opcional (silly_ex)</h4>
 Complete a seguinte prova usando <span class="inlinecode"><span class="id" title="tactic">simpl</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly_ex</span> : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <span class="id" title="var">evenb</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span> → <span class="id" title="var">oddb</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) = <span class="id" title="var">true</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">evenb</span> 3 = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">oddb</span> 4 = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 Para usar a tática <span class="inlinecode"><span class="id" title="tactic">apply</span></span>, o fato, ou a conclusão do fato, a ser aplicado
    precisa corresponder <i>exatamente</i> ao objetivo -- por exemplo, <span class="inlinecode"><span class="id" title="tactic">apply</span></span> não
    vai funcionar se os lados esquerdo e direito da igualdade estão trocados. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly3_firsttry</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">true</span> = <span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 5  →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> (<span class="id" title="var">S</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) 7 = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Neste caso podemos usar a tática <span class="inlinecode"><span class="id" title="tactic">symmetry</span></span> (<i>simetria</i>), que troca os lados
    direito e esquerdo de uma igualdade na meta. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly3</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">true</span> = <span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 5  →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> (<span class="id" title="var">S</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) 7 = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. &nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab4"></a><h4 class="section">Exercício: nível 3 (apply_exercise1)</h4>
 Dica: Você pode usar <span class="inlinecode"><span class="id" title="tactic">apply</span></span> com lemas definidos anteriormente, 
    não apenas hipóteses no contexto. Lembre que <span class="inlinecode"><span class="id" title="keyword">SearchAbout</span></span> é seu
    amigo. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">rev_exercise1</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">l</span> <span class="id" title="var">l&acute;</span> : <span class="id" title="var">list</span> <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">l</span> = <span class="id" title="var">rev</span> <span class="id" title="var">l&acute;</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">l&acute;</span> = <span class="id" title="var">rev</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab5"></a><h4 class="section">Exercício: nível 1, opcional (apply_rewrite)</h4>
 Resumidamente explicar a diferença entre as táticas <span class="inlinecode"><span class="id" title="tactic">apply</span></span> e 
    <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span>. Existem situações em que ambas podem ser aplicadas 
    de maneira útil?
   <font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab6"></a><h1 class="section">A tática <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode">...</span> ( aplique ... com ..._)</h1>

<div class="paragraph"> </div>

 O exemplo trivial abaixo usa duas reescritas em sequência para ir de <span class="inlinecode">[<span class="id" title="var">a</span>,<span class="id" title="var">b</span>]</span> a
    <span class="inlinecode">[<span class="id" title="var">e</span>,<span class="id" title="var">f</span>]</span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">trans_eq_example</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">a</span>;<span class="id" title="var">b</span>] = [<span class="id" title="var">c</span>;<span class="id" title="var">d</span>] →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">c</span>;<span class="id" title="var">d</span>] = [<span class="id" title="var">e</span>;<span class="id" title="var">f</span>] →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">a</span>;<span class="id" title="var">b</span>] = [<span class="id" title="var">e</span>;<span class="id" title="var">f</span>].<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> <span class="id" title="var">eq1</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <span class="id" title="var">eq1</span>. <span class="id" title="tactic">rewrite</span> → <span class="id" title="var">eq2</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Uma vez que este é um padrão comum, poderíamos abstraí-lo como um lema,
    registrando de uma vez por todas o fato de que a igualdade é transitiva. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">trans_eq</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">o</span> : <span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">n</span> = <span class="id" title="var">m</span> → <span class="id" title="var">m</span> = <span class="id" title="var">o</span> → <span class="id" title="var">n</span> = <span class="id" title="var">o</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">o</span> <span class="id" title="var">eq1</span> <span class="id" title="var">eq2</span>. <span class="id" title="tactic">rewrite</span> → <span class="id" title="var">eq1</span>. <span class="id" title="tactic">rewrite</span> → <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Agora, nós devemos poder usar <span class="inlinecode"><span class="id" title="var">trans_eq</span></span> para provar 
    o exemplo acima. Porém, para fazer isso nós precisamos 
    de um refinamento leve da tática <span class="inlinecode"><span class="id" title="tactic">apply</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">trans_eq_example&acute;</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">a</span>;<span class="id" title="var">b</span>] = [<span class="id" title="var">c</span>;<span class="id" title="var">d</span>] →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">c</span>;<span class="id" title="var">d</span>] = [<span class="id" title="var">e</span>;<span class="id" title="var">f</span>] →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">a</span>;<span class="id" title="var">b</span>] = [<span class="id" title="var">e</span>;<span class="id" title="var">f</span>].<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> <span class="id" title="var">eq1</span> <span class="id" title="var">eq2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trans_eq</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">m</span>:=[<span class="id" title="var">c</span>;<span class="id" title="var">d</span>]). <span class="id" title="tactic">apply</span> <span class="id" title="var">eq1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eq2</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Na realidade, usualmente não é preciso incluir o nome <span class="inlinecode"><span class="id" title="var">m</span></span> na cláusula
    <span class="inlinecode"><span class="id" title="keyword">with</span></span>; Coq é frequentemente tem informação o suficiente para determinar que
    variável estamos instanciando. Nós podemos, em vez disso, escrever: <span class="inlinecode"><span class="id" title="tactic">apply</span></span>
    <span class="inlinecode"><span class="id" title="var">trans_eq</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode">[<span class="id" title="var">c</span>,<span class="id" title="var">d</span>]</span>. 
<div class="paragraph"> </div>

<a name="lab7"></a><h4 class="section">Exercício: nível 3, opcional (apply_with_exercise)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Example</span> <span class="id" title="var">trans_eq_exercise</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">o</span> <span class="id" title="var">p</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">m</span> = (<span class="id" title="var">minustwo</span> <span class="id" title="var">o</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span> + <span class="id" title="var">p</span>) = <span class="id" title="var">m</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span> + <span class="id" title="var">p</span>) = (<span class="id" title="var">minustwo</span> <span class="id" title="var">o</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab8"></a><h1 class="section">A tática <span class="inlinecode"><span class="id" title="tactic">inversion</span></span> (<i>inversão</i>)</h1>

<div class="paragraph"> </div>

 Recapitulamos aqui a definição de números naturais:
     Inductive nat : Type :=
       | O : nat
       | S : nat -&gt; nat.
    É claro a partir desta definição que cada número tem uma de duas formas: 
    ou é o construtor <span class="inlinecode"><span class="id" title="var">O</span></span> ou é construído através da aplicação do construtor 
    <span class="inlinecode"><span class="id" title="var">S</span></span> a outro número. Mas há mais aqui do que parece: implícita na definição 
    (e no nosso entendimento informal de como declarações de tipo de dados 
    funcionam em outras linguagens de programação) estão dois outros fatos:

<div class="paragraph"> </div>

<ul class="doclist">
<li> O construtor <span class="inlinecode"><span class="id" title="var">S</span></span> é <i>injetivo</i>. Isto é, podemos obter <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> apenas 

</li>
</ul>
	se <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Os construtores <span class="inlinecode"><span class="id" title="var">O</span></span> e <span class="inlinecode"><span class="id" title="var">S</span></span> são <i>disjuntos</i>. Isto é, <span class="inlinecode">0</span> não é igual a <span class="inlinecode"><span class="id" title="var">S</span></span> 
	<span class="inlinecode"><span class="id" title="var">n</span></span> para qualquer <span class="inlinecode"><span class="id" title="var">n</span></span>. 
</li>
</ul>

<div class="paragraph"> </div>

 Princípios semelhantes aplicam-se a todos os tipos definidos indutivamente:
    todos os construtores são injetores, e os valores construídos a partir de
    construtores distintos nunca são iguais. Para as listas, o construtor <span class="inlinecode"><span class="id" title="var">cons</span></span>
    é injetor e <span class="inlinecode"><span class="id" title="var">nil</span></span> é diferente de todas as listas não-vazias. Para booleanos,
    <span class="inlinecode"><span class="id" title="var">true</span></span> e <span class="inlinecode"><span class="id" title="var">false</span></span> são diferentes. (Uma vez que nem <span class="inlinecode"><span class="id" title="var">true</span></span> nem <span class="inlinecode"><span class="id" title="var">false</span></span> recebem
    quaisquer argumentos, a propriedade de injetividade é irrelevante.) 
<div class="paragraph"> </div>

 O Coq fornece uma tática chamada <span class="inlinecode"><span class="id" title="tactic">inversion</span></span> que nos permite explorar
    esses princípios em provas.

<div class="paragraph"> </div>

    A tática <span class="inlinecode"><span class="id" title="tactic">inversion</span></span> é utilizada da seguinte maneira.  Supondo que <span class="inlinecode"><span class="id" title="var">H</span></span> é 
    uma hipótese no contexto (ou um lema provado anteriormente) da
    forma
      c a1 a2 ... an = d b1 b2 ... bm
    para os contrutores <span class="inlinecode"><span class="id" title="var">c</span></span> e <span class="inlinecode"><span class="id" title="var">d</span></span> e argumentos <span class="inlinecode"><span class="id" title="var">a1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">an</span></span> e
    <span class="inlinecode"><span class="id" title="var">b1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">bm</span></span>.  Então <span class="inlinecode"><span class="id" title="tactic">inversion</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> instrui Coq a "inverter" essa igualdade
    e extrair a informação que ela contém sobre os termos:

<div class="paragraph"> </div>

<ul class="doclist">
<li> Se <span class="inlinecode"><span class="id" title="var">c</span></span> e <span class="inlinecode"><span class="id" title="var">d</span></span> são o mesmo contrutor, então nós sabemos, pela
      injetividade deste contrutor, que <span class="inlinecode"><span class="id" title="var">a1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">b1</span></span>, <span class="inlinecode"><span class="id" title="var">a2</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">b2</span></span>,
      etc.; <span class="inlinecode"><span class="id" title="tactic">inversion</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> adiciona esses fatos no contexto, e tenta
      usá-los para reescrever a meta.

<div class="paragraph"> </div>


</li>
<li> Se <span class="inlinecode"><span class="id" title="var">c</span></span> e <span class="inlinecode"><span class="id" title="var">d</span></span> são construtores diferentes, então a hipótese <span class="inlinecode"><span class="id" title="var">H</span></span> 
      é contraditória. Ou seja, uma suposição falsa se infiltrou no 
      contexto, e isso significa que qualquer meta é demonstrável! 
      Neste caso, <span class="inlinecode"><span class="id" title="tactic">inversion</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> marca a meta atual como concluída 
      e a coloca para fora da pilha de metas. 
</li>
</ul>

<div class="paragraph"> </div>

 A tática <span class="inlinecode"><span class="id" title="tactic">inversion</span></span> é provavelmente mais fácil de entender vendo-a em ação
    do que através de descrições gerais. Você verá abaixo teoremas exemplos que
    demonstram o uso de <span class="inlinecode"><span class="id" title="tactic">inversion</span></span> e exercícios para testar sua compreensão a
    respeito. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">eq_add_S</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">S</span> <span class="id" title="var">n</span> = <span class="id" title="var">S</span> <span class="id" title="var">m</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> = <span class="id" title="var">m</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly4</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">n</span>] = [<span class="id" title="var">m</span>] →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> = <span class="id" title="var">m</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">o</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Por conveniência, a tática <span class="inlinecode"><span class="id" title="tactic">inversion</span></span> também pode destruir igualdades entre
    valores complexos, conectando múltiplas variáveis à medida em que é
    aplicada. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly5</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">o</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">n</span>;<span class="id" title="var">m</span>] = [<span class="id" title="var">o</span>;<span class="id" title="var">o</span>] →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">n</span>] = [<span class="id" title="var">m</span>].<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">o</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab9"></a><h4 class="section">Exercício: nível 1 (sillyex1)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Example</span> <span class="id" title="var">sillyex1</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">l</span> <span class="id" title="var">j</span> : <span class="id" title="var">list</span> <span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> :: <span class="id" title="var">y</span> :: <span class="id" title="var">l</span> = <span class="id" title="var">z</span> :: <span class="id" title="var">j</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">y</span> :: <span class="id" title="var">l</span> = <span class="id" title="var">x</span> :: <span class="id" title="var">j</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> = <span class="id" title="var">y</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly6</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">S</span> <span class="id" title="var">n</span> = <span class="id" title="var">O</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 + 2 = 5.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">contra</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly7</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">n</span>] = [<span class="id" title="var">m</span>].<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">contra</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">contra</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab10"></a><h4 class="section">Exercício: nível 1 (sillyex2)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Example</span> <span class="id" title="var">sillyex2</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">l</span> <span class="id" title="var">j</span> : <span class="id" title="var">list</span> <span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> :: <span class="id" title="var">y</span> :: <span class="id" title="var">l</span> = [] →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">y</span> :: <span class="id" title="var">l</span> = <span class="id" title="var">z</span> :: <span class="id" title="var">j</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> = <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 Enquanto a injetividade dos construtores nos permite raciocinar
    <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode">(<span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span>),</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, a direção reversa da 
    implicação é uma instância de um fato mais geral sobre construtores
    e funções, o que nós frequentemente achamos útil. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="tactic">f_equal</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span>: <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span>: <span class="id" title="var">A</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> = <span class="id" title="var">y</span> → <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab11"></a><h4 class="section">Exercício: nível 2, opcional (practice)</h4>
 Seguem algumas provas, não triviais mas também não tão complexas, para
    serem trabalhadas em classe, ou para você trabalhar como exercícios. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">beq_nat_0_l</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> 0 <span class="id" title="var">n</span> = <span class="id" title="var">true</span> → <span class="id" title="var">n</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">beq_nat_0_r</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 0 = <span class="id" title="var">true</span> → <span class="id" title="var">n</span> = 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab12"></a><h1 class="section">Aplicação de Táticas nas Hipóteses</h1>

<div class="paragraph"> </div>

 Por padrão, a maioria das táticas funcionam na fórmula da meta e
    deixa o contexto inalterado. Contudo, a maioria das táticas também tem
    um variante que realiza operação similiar à sentença no contexto.

<div class="paragraph"> </div>

    Por exemplo, a tática <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> executa simplificação na hipótese 
    chamada <span class="inlinecode"><span class="id" title="var">H</span></span> no contexto. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">S_inj</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">bool</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) (<span class="id" title="var">S</span> <span class="id" title="var">m</span>) = <span class="id" title="var">b</span>  →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> = <span class="id" title="var">b</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">b</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Similarmente a tática <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">L</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> casa uma sentença condicional <span class="inlinecode"><span class="id" title="var">L</span></span>
    (digamos, com a forma <span class="inlinecode"><span class="id" title="var">L1</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">L2</span></span>) com uma hipótese <span class="inlinecode"><span class="id" title="var">H</span></span> no contexto. Porém,
    ao contrário de um simples <span class="inlinecode"><span class="id" title="tactic">apply</span></span> (que reescreve uma meta casada com <span class="inlinecode"><span class="id" title="var">L2</span></span>
    pela submeta <span class="inlinecode"><span class="id" title="var">L1</span></span>), <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">L</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> casa <span class="inlinecode"><span class="id" title="var">H</span></span> contra <span class="inlinecode"><span class="id" title="var">L1</span></span> e, se no caso de
    sucesso, o substitui por <span class="inlinecode"><span class="id" title="var">L2</span></span>.  Em outras palavras, <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">L</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> nos dá
    uma forma de "raciocínio progressivo " -- a partir de <span class="inlinecode"><span class="id" title="var">L1</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">L2</span></span> e uma
    hipótese casando com <span class="inlinecode"><span class="id" title="var">L1</span></span>, temos uma hipótese casando com <span class="inlinecode"><span class="id" title="var">L2</span></span>. Por outro
    lado, <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">L</span></span> é um "raciocínio regressivo" -- isto indica que se sabemos
    que <span class="inlinecode"><span class="id" title="var">L1</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">L2</span></span> e estamos tentando provar <span class="inlinecode"><span class="id" title="var">L2</span></span>, basta que provemos <span class="inlinecode"><span class="id" title="var">L1</span></span>.

<div class="paragraph"> </div>

    Aqui está uma variante de uma prova de cima, usando inteiramente raciocínio 
    progressivo ao invés do raciocínio regressivo. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">silly3&acute;</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 5 = <span class="id" title="var">true</span> → <span class="id" title="var">beq_nat</span> (<span class="id" title="var">S</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) 7 = <span class="id" title="var">true</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">true</span> = <span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 5  →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">true</span> = <span class="id" title="var">beq_nat</span> (<span class="id" title="var">S</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) 7.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">eq</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">eq</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">symmetry</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Raciocínio progressivo começa a partir do que é <i>dado</i> (premissas, teoremas
    provados anteriormente) e iterativamente retira conclusões a partir delas
    até a meta ser alcançada.  Raciocínio regressivo começa a partir da <i>meta</i>,
    e iterativamente raciocína sobre o que implicaria a meta, até premissas ou
    teoremas previamente provados serem alcançados.  Se você já viu uma prova
    informal antes (por exemplo, em uma aula de matemática ou ciência da
    computação), eles provavelmente utilizaram raciocínio progressivo.  No
    geral, Coq tende a favorecer o raciocínio regressivo, mas em algumas
    situações o estilo progressivo pode ser mais fácil de usar ou pensar sobre.
    
<div class="paragraph"> </div>

<a name="lab13"></a><h4 class="section">Exercício: nível 3 (plus_n_n_injective)</h4>
 Pratique usando o variante "in" neste exercício. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">plus_n_n_injective</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> + <span class="id" title="var">n</span> = <span class="id" title="var">m</span> + <span class="id" title="var">m</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> = <span class="id" title="var">m</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n&acute;</span>].<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab14"></a><h1 class="section">Alterando a Hipótese de Indução</h1>

<div class="paragraph"> </div>

 As vezes é importante controlar a forma exata da hipótese de 
    indução quando da realização de provas indutivas em Coq. 
    Em particular, precisamos ter cuidado sobre quais suposições 
    devemos mover (usando <span class="inlinecode"><span class="id" title="tactic">intros</span></span>) da meta para o contexto 
    antes de chamar a tática <span class="inlinecode"><span class="id" title="tactic">induction</span></span>. Por exemplo, suponha que 
    queremos mostrar que a função <span class="inlinecode"><span class="id" title="var">double</span></span> é injetiva - ou seja, 
    que ela sempre mapeia diferentes parâmetros para diferentes 
    resultados:
    Theorem double_injective: forall n m, double n = double m -&gt; n = m.
    A maneira que nós <i>começamos</i> esta prova é um pouco delicada: se começarmos com
      intros n. induction n.
]] 
    tudo estará bem. Porém, se começarmos com
      intros n m. induction n.
    nós ficaremos presos no meio do caso indutivo... 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">double_injective_FAILED</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">double</span> <span class="id" title="var">n</span> = <span class="id" title="var">double</span> <span class="id" title="var">m</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> = <span class="id" title="var">m</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n&acute;</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "n = O". <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">m&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "m = O". <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "m = S m'". <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "n = S n'". <span class="id" title="tactic">intros</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">m&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "m = O". <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "m = S m'". <span class="id" title="tactic">apply</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
O que deu errado? 
<div class="paragraph"> </div>

 O problema é que, no momento em que aplicamos a hipótese indutiva, nós já
    tínhamos introduzido <span class="inlinecode"><span class="id" title="var">m</span></span> no contexto -- intuitivamente, dissemos ao Coq
    "vamos considerar um <span class="inlinecode"><span class="id" title="var">n</span></span> e um <span class="inlinecode"><span class="id" title="var">m</span></span> específicos..." e agora devemos provar
    que, se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> para estes <span class="inlinecode"><span class="id" title="var">n</span></span> e <span class="inlinecode"><span class="id" title="var">m</span></span> <i>específicos</i>, então <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span>
    <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>

    A tática seguinte, <span class="inlinecode"><span class="id" title="tactic">induction</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> diz à Coq que: iremos provar a meta por
    indução sobre <span class="inlinecode"><span class="id" title="var">n</span></span>. Ou seja, iremos provar que a proposição

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>  =  "se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>, então <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>"

</li>
</ul>

<div class="paragraph"> </div>

    vale para todo <span class="inlinecode"><span class="id" title="var">n</span></span> através da prova de que

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">O</span></span>              

<div class="paragraph"> </div>

         (i.e., "se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> então <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>")

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span>  

<div class="paragraph"> </div>

        (i.e., "se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> então <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>" implica que "se
        <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> então <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>").

</li>
</ul>

<div class="paragraph"> </div>

    Se nós olharmos mais de perto para a segunda afirmação, ela está dizendo
    algo um pouco estranho: ela diz que, para um <span class="inlinecode"><span class="id" title="var">m</span></span> particular, se nós 
    sabermos que

<div class="paragraph"> </div>

<ul class="doclist">
<li> "se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> então <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>"

</li>
</ul>

<div class="paragraph"> </div>

    então nós podemos provar

<div class="paragraph"> </div>

<ul class="doclist">
<li> "se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> então <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>".

</li>
</ul>

<div class="paragraph"> </div>

    Para ver como isso é estranho, vamos pensar em um <span class="inlinecode"><span class="id" title="var">m</span></span> em particular --
    digamos, <span class="inlinecode">5</span>.  A afirmação é então está dizendo que, se nós sabemos que

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">Q</span></span> = "se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">10</span> então <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">5</span>"

</li>
</ul>

<div class="paragraph"> </div>

    então nós podemos provar que

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">R</span></span> = "se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode">10</span> então <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">5</span>".

</li>
</ul>

<div class="paragraph"> </div>

    Mas sabendo <span class="inlinecode"><span class="id" title="var">Q</span></span> não nos da qualquer ajuda com a prova <span class="inlinecode"><span class="id" title="var">R</span></span>! (se nós
    tentarmos provar <span class="inlinecode"><span class="id" title="var">R</span></span> a partir de <span class="inlinecode"><span class="id" title="var">Q</span></span>, nós diríamos algo como "suponha"
    <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode">10</span>..." mas então nós estariamos presos: Sabendo que
    <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> é <span class="inlinecode">10</span> diz para a gente nada sobre se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>
    é <span class="inlinecode">10</span>, então <span class="inlinecode"><span class="id" title="var">Q</span></span> inútil nesse ponto.) 
<div class="paragraph"> </div>

 Para resumir: tentar realizar esta prova por indução em <span class="inlinecode"><span class="id" title="var">n</span></span> quando <span class="inlinecode"><span class="id" title="var">m</span></span> 
    já está no contexto não funciona porque estamos tentando provar uma 
    relação que envolve <i>todos</i> os <span class="inlinecode"><span class="id" title="var">n</span></span>, mas apenas um _único <span class="inlinecode"><span class="id" title="var">m</span></span>. 
<div class="paragraph"> </div>

 A demonstração correta de <span class="inlinecode"><span class="id" title="var">double_injective</span></span> deixa <span class="inlinecode"><span class="id" title="var">m</span></span> na meta num ponto tal
    que a tática <span class="inlinecode"><span class="id" title="tactic">induction</span></span> é aplicada em <span class="inlinecode"><span class="id" title="var">n</span></span>: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">double_injective</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">double</span> <span class="id" title="var">n</span> = <span class="id" title="var">double</span> <span class="id" title="var">m</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> = <span class="id" title="var">m</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n&acute;</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "n = O". <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">m&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "m = O". <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "m = S m'". <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "n = S n'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">m&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "m = O".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "m = S m'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHn&acute;</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
O que isto nos ensina é que precisamos ter cuidado no uso da indução para
    tentar provar algo muito específico: se estamos provando uma propriedade de
    <span class="inlinecode"><span class="id" title="var">n</span></span> e <span class="inlinecode"><span class="id" title="var">m</span></span> por indução sobre <span class="inlinecode"><span class="id" title="var">n</span></span>, podemos precisar manter <span class="inlinecode"><span class="id" title="var">m</span></span> genérico. 
<div class="paragraph"> </div>

 A prova desse teorema (deixado como um exercício) tem de ser tratado
    similarmente:
<div class="paragraph"> </div>

<a name="lab15"></a><h4 class="section">Exercício: nível 2 (beq_nat_true)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">beq_nat_true</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> = <span class="id" title="var">true</span> → <span class="id" title="var">n</span> = <span class="id" title="var">m</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab16"></a><h4 class="section">Exercício: nível 2, avançado (beq_nat_true_informal)</h4>
 Dar um minuciosa prova informal de <span class="inlinecode"><span class="id" title="var">beq_nat_true</span></span>, sendo o mais
    explicito possível sobre quantificadores. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 A estratégia de fazer alguns <span class="inlinecode"><span class="id" title="tactic">intros</span></span> antes de um <span class="inlinecode"><span class="id" title="tactic">induction</span></span> nem sempre
    funciona diretamente; as vezes um pouco de <i>rearranjo</i> de variáveis
    quantificadas é preciso. Suponha, por exemplo, que nós queremos provar
    <span class="inlinecode"><span class="id" title="var">double_injective</span></span> por indução em <span class="inlinecode"><span class="id" title="var">m</span></span> em vez de <span class="inlinecode"><span class="id" title="var">n</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">double_injective_take2_FAILED</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">double</span> <span class="id" title="var">n</span> = <span class="id" title="var">double</span> <span class="id" title="var">m</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> = <span class="id" title="var">m</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">m&acute;</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "m = O". <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = O". <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = S n'". <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "m = S m'". <span class="id" title="tactic">intros</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = O". <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = S n'". <span class="id" title="tactic">apply</span> <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
O problema é que, para fazer indução em <span class="inlinecode"><span class="id" title="var">m</span></span>, devemos primeiro introduzir
    <span class="inlinecode"><span class="id" title="var">n</span></span>. (Se nós simplesmente dissermos <span class="inlinecode"><span class="id" title="tactic">induction</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> sem introduzir nada antes,
    Coq irá introduzir automaticamente <span class="inlinecode"><span class="id" title="var">n</span></span> para nós!)  
<div class="paragraph"> </div>

 O que podemos fazer sobre isso? Uma possibilidade é reescrever a declaração
    do lema para que <span class="inlinecode"><span class="id" title="var">m</span></span> seja quantificada antes de <span class="inlinecode"><span class="id" title="var">n</span></span>. Isto funcionará, mas
    não é legal: não queremos reescrever as declarações dos lemas apenas para
    poderem ser provados com uma certa estratégia -- queremos estas declarações
    da forma mais simples e natural possível. 
<div class="paragraph"> </div>

 Ao invés disso, o que podemos fazer em primeiro lugar é introduzir todas as
    variáveis quantificadas e, em seguida, <i>re-generalizar</i> uma ou mais delas,
    levando-os para fora do contexto e colocando-as de volta no início da meta.
    A tática <span class="inlinecode"><span class="id" title="tactic">generalize</span></span> <span class="inlinecode"><span class="id" title="tactic">dependent</span></span> faz isto. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">double_injective_take2</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">double</span> <span class="id" title="var">n</span> = <span class="id" title="var">double</span> <span class="id" title="var">m</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> = <span class="id" title="var">m</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">m&acute;</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "m = O". <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = O". <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = S n'". <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "m = S m'". <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = O". <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = S n'". <span class="id" title="tactic">apply</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHm&acute;</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Vamos olhar para uma prova informal desse teorema. Note que a
    proposição que provamos por indução deixa <span class="inlinecode"><span class="id" title="var">n</span></span> quantificado, 
    correspondendo ao uso de dependente generalizado na nossa prova
    formal.

<div class="paragraph"> </div>

<i>Teoream</i>: Para quaisquer naturais <span class="inlinecode"><span class="id" title="var">n</span></span> e <span class="inlinecode"><span class="id" title="var">m</span></span>, se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>, então
  <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>

<i>Demonstração</i>: Seja <span class="inlinecode"><span class="id" title="var">m</span></span> um <span class="inlinecode"><span class="id" title="var">nat</span></span>. Demonstramos por indução em <span class="inlinecode"><span class="id" title="var">m</span></span> que, para
  qualquer <span class="inlinecode"><span class="id" title="var">n</span></span>, se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> então <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>

<ul class="doclist">
<li> Primeiramente, suponha <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>, e suponha que <span class="inlinecode"><span class="id" title="var">n</span></span> é um número tal
    que <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>.  Nós devemos mostrar que <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>.

<div class="paragraph"> </div>

    Uma vez que <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>, pela definição de <span class="inlinecode"><span class="id" title="var">double</span></span> nós temos <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>.
    Existem dois casos a considerar para <span class="inlinecode"><span class="id" title="var">n</span></span>.  Se <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span> acabamos, uma vez que
    é isso que queremos mostrar.  Senão, se <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n&acute;</span></span> para algum <span class="inlinecode"><span class="id" title="var">n&acute;</span></span>,
    derivamos uma contradição: pela definição de <span class="inlinecode"><span class="id" title="var">double</span></span> teriamos <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span>
    <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n&acute;</span>))</span>, mas isso contradiz a hipótese que <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>.

<div class="paragraph"> </div>


</li>
<li> Por outro lado, suponha <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m&acute;</span></span> e que <span class="inlinecode"><span class="id" title="var">n</span></span> é novamente um número
    tal que <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>.  Nós devemos mostrar que <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m&acute;</span></span>, com
    indução da hipótese que para todo número <span class="inlinecode"><span class="id" title="var">s</span></span>, se <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">=</span>
    <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m&acute;</span></span> então <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m&acute;</span></span>.

<div class="paragraph"> </div>

    Pelo fato que <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m&acute;</span></span> e a definição de <span class="inlinecode"><span class="id" title="var">double</span></span>, nós temos
    <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m&acute;</span>))</span>.  Existem dois casos para considerar
    <span class="inlinecode"><span class="id" title="var">n</span></span>.

<div class="paragraph"> </div>

    Se <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>, então por definição <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>, uma contradição.
    Assim, podemos assumir que <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n&acute;</span></span> para algum <span class="inlinecode"><span class="id" title="var">n&acute;</span></span>, e novamente 
    pela definição de <span class="inlinecode"><span class="id" title="var">double</span></span> nós temos <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n&acute;</span>))</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> 
    <span class="inlinecode">(<span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m&acute;</span>))</span>, o que implica por inversão que <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n&acute;</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> 
    <span class="inlinecode"><span class="id" title="var">m&acute;</span></span>.

<div class="paragraph"> </div>

    Instanciar a hipótese de indução com <span class="inlinecode"><span class="id" title="var">n&acute;</span></span>, portanto, permite-nos 
    concluir que <span class="inlinecode"><span class="id" title="var">n&acute;</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m&acute;</span></span>, e segue-se imediatamente que <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n&acute;</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m&acute;</span></span>. 
    Uma vez que <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n&acute;</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> e <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m&acute;</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, isso é justamente o que 
    queríamos mostrar. <font size=-2>&#9744;</font> 
</li>
</ul>

<div class="paragraph"> </div>

 Abaixo se encontra outro exemplo de <span class="inlinecode"><span class="id" title="tactic">inversion</span></span> e do uso de uma hipótese de
    indução geral apropriada. Esta é uma forma ligeiramente indireta de declarar
    um fato que já provamos acima. As igualdades adicionais obrigam a fazer mais
    cálculos em equações e exercitar algumas das táticas que já vimos
    recentemente. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">length_snoc&acute;</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">X</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> <span class="id" title="var">l</span> = <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="var">snoc</span> <span class="id" title="var">l</span> <span class="id" title="var">v</span>) = <span class="id" title="var">S</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">v</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">v&acute;</span> <span class="id" title="var">l&acute;</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "l = []".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>. <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "l = v' :: l'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = 0". <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = S n'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl&acute;</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Pode ser tentador começar a provar o teorema acima através da introdução de
    <span class="inlinecode"><span class="id" title="var">n</span></span> e <span class="inlinecode"><span class="id" title="var">eq</span></span> no contexto. No entanto, isto nos leva a uma hipótese de indução
    que não é suficientemente forte. Compare a prova acima com a seguinte
    tentativa (abortada): 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">length_snoc_bad</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">X</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> <span class="id" title="var">l</span> = <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="var">snoc</span> <span class="id" title="var">l</span> <span class="id" title="var">v</span>) = <span class="id" title="var">S</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">v</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">v&acute;</span> <span class="id" title="var">l&acute;</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "l = []".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>. <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">Case</span> "l = v' :: l'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n&acute;</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = 0". <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "n = S n'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="tactic">f_equal</span>. <span class="id" title="keyword">Abort</span>.  
<br/>
</div>

<div class="doc">
Como nos exemplos dobrados, o problema é que por introduzir <span class="inlinecode"><span class="id" title="var">n</span></span>
    antes de fazer a indução em <span class="inlinecode"><span class="id" title="var">l</span></span>, a hipótese de indução é 
    especializada  para um número natural particular, chamado <span class="inlinecode"><span class="id" title="var">n</span></span>. 
    No caso de indução, entretanto, nós precisamos poder usar a hipótese 
    de indução em alguns outros números naturais <span class="inlinecode"><span class="id" title="var">n&acute;</span></span>. Retendo a forma 
    mais geral da hipótese de indução, assim, nos dá mais fexibilidade.

<div class="paragraph"> </div>

    No geral, uma boa regra de ouro é fazer a hipótese de indução
    ser a mais geral possível. 
<div class="paragraph"> </div>

<a name="lab17"></a><h4 class="section">Exercício: nível 3 (gen_dep_practice)</h4>
 Provar por indução em <span class="inlinecode"><span class="id" title="var">l</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">index_after_last</span>: <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> <span class="id" title="var">l</span> = <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">index</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> = <span class="id" title="var">None</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab18"></a><h4 class="section">Exercício: nível 3, avançado, opcional (index_after_last_informal)</h4>
 Escrever uma prova informal de <span class="inlinecode"><span class="id" title="var">index_after_last</span></span> correspondente à sua prova
    em Coq:

<div class="paragraph"> </div>

     <i>Teorema</i>: Para qualquer conjunto <span class="inlinecode"><span class="id" title="var">X</span></span>, lista <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">list</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span>, e número
      <span class="inlinecode"><span class="id" title="var">n</span></span>, se <span class="inlinecode"><span class="id" title="var">length</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> então <span class="inlinecode"><span class="id" title="var">index</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">None</span></span>.

<div class="paragraph"> </div>

     <i>Demonstração</i>:
     <font size=-2>&#9744;</font>

<div class="paragraph"> </div>

<a name="lab19"></a><h4 class="section">Exercício: nível 3, opcional (gen_dep_practice_more)</h4>
 Provar o seguinte teorema através de indução sobre <span class="inlinecode"><span class="id" title="var">l</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">length_snoc&acute;&acute;&acute;</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> <span class="id" title="var">l</span> = <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="var">snoc</span> <span class="id" title="var">l</span> <span class="id" title="var">v</span>) = <span class="id" title="var">S</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab20"></a><h4 class="section">Exercício: nível 3, opcional (app_length_cons)</h4>
 Provar o teorema seguinte por indução em <span class="inlinecode"><span class="id" title="var">l1</span></span>, sem usar <span class="inlinecode"><span class="id" title="var">app_length</span></span> de <span class="inlinecode"><span class="id" title="var">Lists</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">app_length_cons</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">X</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="var">l1</span> ++ (<span class="id" title="var">x</span> :: <span class="id" title="var">l2</span>)) = <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">S</span> (<span class="id" title="var">length</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>)) = <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab21"></a><h4 class="section">Exercício: nível 4, opcional (app_length_twice)</h4>
 Provar por indução sobre <span class="inlinecode"><span class="id" title="var">l</span></span>, sem utilizar app_length. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">app_length_twice</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> <span class="id" title="var">l</span> = <span class="id" title="var">n</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="var">l</span> ++ <span class="id" title="var">l</span>) = <span class="id" title="var">n</span> + <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab22"></a><h4 class="section">Exercício: nível 3, opcional (double_induction)</h4>
 Prova a seguir pelo princípio da indução sobre dois naturais. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">double_induction</span>: <span class="id" title="keyword">∀</span> (<span class="id" title="var">P</span> : <span class="id" title="var">nat</span> → <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span>), <br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> 0 0 →<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">m</span>, <span class="id" title="var">P</span> <span class="id" title="var">m</span> 0 → <span class="id" title="var">P</span> (<span class="id" title="var">S</span> <span class="id" title="var">m</span>) 0) →<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <span class="id" title="var">P</span> 0 <span class="id" title="var">n</span> → <span class="id" title="var">P</span> 0 (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) →<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>, <span class="id" title="var">P</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> → <span class="id" title="var">P</span> (<span class="id" title="var">S</span> <span class="id" title="var">m</span>) (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)) →<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>, <span class="id" title="var">P</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab23"></a><h1 class="section">Aplicação de <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> a Expressões Compostas</h1>

<div class="paragraph"> </div>

 Temos visto muitos exemplos em que a tática <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> é usada 
    para realizar análise de caso do valor de alguma variável. Mas 
    às vezes precisamos raciocinar por casos sobre o resultado de 
    alguma <i>expressão</i>. Nós também podemos fazer isso com <span class="inlinecode"><span class="id" title="tactic">destruct</span></span>.

<div class="paragraph"> </div>

    Aqui estão alguns exemplos: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">sillyfun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) : <span class="id" title="var">bool</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 3 <span class="id" title="keyword">then</span> <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 5 <span class="id" title="keyword">then</span> <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sillyfun_false</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sillyfun</span> <span class="id" title="var">n</span> = <span class="id" title="var">false</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">sillyfun</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 3).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Case</span> "beq_nat n 3 = true". <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Case</span> "beq_nat n 3 = false". <span class="id" title="tactic">destruct</span> (<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 5).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "beq_nat n 5 = true". <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "beq_nat n 5 = false". <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Após aplicar <span class="inlinecode"><span class="id" title="tactic">unfold</span></span> em <span class="inlinecode"><span class="id" title="var">sillyfun</span></span> na prova acima, percebemos que 
	estamos presos em <span class="inlinecode"><span class="id" title="keyword">if</span></span> <span class="inlinecode">(<span class="id" title="var">beq_nat</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">3)</span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode">...</span>. Bem, <span class="inlinecode"><span class="id" title="var">n</span></span> pode tanto 
	igual a como diferente de <span class="inlinecode">3</span>, então usamos <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode">(<span class="id" title="var">beq_nat</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">3)</span> para 
	podermos provar nos dois casos.

<div class="paragraph"> </div>

    Em geral, a tática <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> pode ser usado para realizar a análise de caso
    dos resultados de cálculos arbitrários. Se <span class="inlinecode"><span class="id" title="var">e</span></span> é uma expressão cujo tipo
    é algum tipo <span class="inlinecode"><span class="id" title="var">T</span></span> definido indutivamente, então, para cada construtor <span class="inlinecode"><span class="id" title="var">c</span></span> de
    <span class="inlinecode"><span class="id" title="var">T</span></span>, <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><span class="id" title="var">e</span></span> gera uma sub-meta em que todas as ocorrências de <span class="inlinecode"><span class="id" title="var">e</span></span> (na
    meta e no contexto) são substituídas por <span class="inlinecode"><span class="id" title="var">c</span></span>.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a name="lab24"></a><h4 class="section">Exercício: nível 1 (override_shadow)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">override_shadow</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span>:<span class="id" title="keyword">Type</span>) <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> (<span class="id" title="var">f</span> : <span class="id" title="var">nat</span>→<span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="var">override</span> (<span class="id" title="var">override</span> <span class="id" title="var">f</span> <span class="id" title="var">k1</span> <span class="id" title="var">x2</span>) <span class="id" title="var">k1</span> <span class="id" title="var">x1</span>) <span class="id" title="var">k2</span> = (<span class="id" title="var">override</span> <span class="id" title="var">f</span> <span class="id" title="var">k1</span> <span class="id" title="var">x1</span>) <span class="id" title="var">k2</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab25"></a><h4 class="section">Exercício: nível 3, opcional (combine_split)</h4>
 Completar a prova abaixo 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">combine_split</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">X</span> × <span class="id" title="var">Y</span>)) <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> <span class="id" title="var">l</span> = (<span class="id" title="var">l1</span>, <span class="id" title="var">l2</span>) →<br/>
&nbsp;&nbsp;<span class="id" title="var">combine</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> = <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 Algumas vezes, fazer um <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> em uma expressão composta (uma
    não variavél) irá apagar informação que precisamos para completar a prova.  Por exemplo, suponha que nós definimos uma função <span class="inlinecode"><span class="id" title="var">sillyfun1</span></span> como esta: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">sillyfun1</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) : <span class="id" title="var">bool</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 3 <span class="id" title="keyword">then</span> <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 5 <span class="id" title="keyword">then</span> <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">false</span>.<br/>

<br/>
</div>

<div class="doc">
E suponha que queremos convencer o Coq da observação bastante óbvia 
    de que <span class="inlinecode"><span class="id" title="var">sillyfun1</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> resulta em <span class="inlinecode"><span class="id" title="var">true</span></span> apenas quando <span class="inlinecode"><span class="id" title="var">n</span></span> é ímpar. 
    Por analogia com as provas que fizemos com <span class="inlinecode"><span class="id" title="var">sillyfun</span></span> acima, é 
    natural começar a prova da seguinte forma: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sillyfun1_odd_FAILED</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sillyfun1</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">oddb</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">sillyfun1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 3).<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Ficamos presos neste ponto pois o contexto não contém informação 
	suficiente para provar a meta! O problema é que a substituição realizada 
	por <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> é brutal demais -- ele jogou fora todas as ocorrências de 
	<span class="inlinecode"><span class="id" title="var">beq_nat</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">3</span>, mas precisamos manter na memória esta expressão e como ela 
	foi destruída. O motivo é que precisamos posteriormente raciocinar sobre 
	esta sentença, uma vez que, neste ramo da análise de casos, <span class="inlinecode"><span class="id" title="var">beq_nat</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">3</span> <span class="inlinecode">=</span> 
	<span class="inlinecode"><span class="id" title="var">true</span></span> se <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">3</span>, concluindo que <span class="inlinecode"><span class="id" title="var">n</span></span> é ímpar.

<div class="paragraph"> </div>

    O que nós gostaríamos de fazer, de fato, seria substituir todas as
    ocorrências existentes de <span class="inlinecode"><span class="id" title="var">beq_nat</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">3</span>, mas, ao mesmo tempo, adicionar uma
    equação para o contexto que registre em qual caso estamos. O marcador <span class="inlinecode"><span class="id" title="var">eqn</span>:</span>
    permite-nos introduzir uma equação como essa (com qualquer que seja o nome
    que escolhermos). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">sillyfun1_odd</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sillyfun1</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">oddb</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">sillyfun1</span> <span class="id" title="keyword">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 3) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqe3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Case</span> "e3 = true". <span class="id" title="tactic">apply</span> <span class="id" title="var">beq_nat_true</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqe3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <span class="id" title="var">Heqe3</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Case</span> "e3 = false".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> 5) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqe5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "e5 = true".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">beq_nat_true</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Heqe5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <span class="id" title="var">Heqe5</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">SCase</span> "e5 = false". <span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab26"></a><h4 class="section">Exercício: nível 2 (destruct_eqn_practice)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">bool_fn_applied_thrice</span> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">f</span> : <span class="id" title="var">bool</span> → <span class="id" title="var">bool</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">bool</span>), <br/>
&nbsp;&nbsp;<span class="id" title="var">f</span> (<span class="id" title="var">f</span> (<span class="id" title="var">f</span> <span class="id" title="var">b</span>)) = <span class="id" title="var">f</span> <span class="id" title="var">b</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab27"></a><h4 class="section">Exercício: nível 2 (override_same)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">override_same</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span>:<span class="id" title="keyword">Type</span>) <span class="id" title="var">x1</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> (<span class="id" title="var">f</span> : <span class="id" title="var">nat</span>→<span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">f</span> <span class="id" title="var">k1</span> = <span class="id" title="var">x1</span> → <br/>
&nbsp;&nbsp;(<span class="id" title="var">override</span> <span class="id" title="var">f</span> <span class="id" title="var">k1</span> <span class="id" title="var">x1</span>) <span class="id" title="var">k2</span> = <span class="id" title="var">f</span> <span class="id" title="var">k2</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab28"></a><h1 class="section">Revisão</h1>

<div class="paragraph"> </div>

 Nós temos visto agora muitas táticas fundamentais de Coq. Nós vamos
    introduzir algumas mais conforme nós passamos pelas próximas aulas, 
    e mais tarde no curso nós vamos introduzir algumas táticas de 
    <i>automação</i> mais poderosas que fazem Coq fazer mais do trabalho
    de baixo nível em muitos casos. Mas basicamente nós temos em mãos o que
    precisamos para trabalhar.

<div class="paragraph"> </div>

    Aqui está o que nós já vimos:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="tactic">intros</span></span>: 
        desloca hipóteses/variavéis da meta para o contexto 

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>:
        finaliza a prova (quando a meta parece como <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">e</span></span>)

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">apply</span></span>:
        prove a meta usando uma hipótese, lema ou construtor

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">apply</span>...</span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>: 
        Aplique uma hipótese, lemma, ou construtor para uma hipótese no 
        contexto (raciocínio adiante)

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">apply</span>...</span> <span class="inlinecode"><span class="id" title="keyword">with</span>...</span>:
        Especifique valores explicitamente para variáveis que não podem ser
        determinadas pelo casamento de padrão

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">simpl</span></span>:
        simplifica cálculos na meta 

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>:
        ... ou em uma hipótese

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span>:
        utilise uma igualdade em hipótese (ou lema) para reescrever a meta

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>:
        ... ou uma hipótese

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">symmetry</span></span>: 
	      muda uma meta com a forma <span class="inlinecode"><span class="id" title="var">t</span>=<span class="id" title="var">u</span></span> para <span class="inlinecode"><span class="id" title="var">u</span>=<span class="id" title="var">t</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">symmetry</span></span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>: 
	      muda uma hipótese com a forma <span class="inlinecode"><span class="id" title="var">t</span>=<span class="id" title="var">u</span></span> para <span class="inlinecode"><span class="id" title="var">u</span>=<span class="id" title="var">t</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">unfold</span></span>:
        substitui uma constante definida pelo seu lado direito na meta 

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">unfold</span>...</span> <span class="inlinecode"><span class="id" title="keyword">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>:
        ... ou uma hipótese

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">destruct</span>...</span> <span class="inlinecode"><span class="id" title="keyword">as</span>...</span>:
        Análise de caso em valores de tipos definidos indutivamente

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">destruct</span>...</span> <span class="inlinecode"><span class="id" title="var">eqn</span>:...</span>:
        Especifica o nome de uma equação a ser adicionada ao contexto,
        gravando o resultado da análise de caso

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">induction</span>...</span> <span class="inlinecode"><span class="id" title="keyword">as</span>...</span>:
        indução de valores de tipos definidos indutivamente

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">inversion</span></span>:
        raciocínio pela injetividade e distinção de construtores

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">assert</span></span> <span class="inlinecode">(<span class="id" title="var">e</span>)</span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>:
        introduz um "lema local" <span class="inlinecode"><span class="id" title="var">e</span></span> e o chama de <span class="inlinecode"><span class="id" title="var">H</span></span> 

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><span class="id" title="tactic">generalize</span></span> <span class="inlinecode"><span class="id" title="tactic">dependent</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span>:
        move a variavél <span class="inlinecode"><span class="id" title="var">x</span></span> (e tudo mais que depender dela)
        do contexto de volta para uma hipótese explícita na fórmula
        da meta

</li>
</ul>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab29"></a><h1 class="section">Exercícios Adicionais</h1>

<div class="paragraph"> </div>

<a name="lab30"></a><h4 class="section">Exercício: nível 3 (beq_nat_sym)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">beq_nat_sym</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> = <span class="id" title="var">beq_nat</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab31"></a><h4 class="section">Exercício: nível 3, avançado, opcional (beq_nat_sym_informal)</h4>
 Dar uma prova informal deste lema que corresponda a sua prova
    formal acima:

<div class="paragraph"> </div>

   Teorema: para todo <span class="inlinecode"><span class="id" title="var">nat</span></span>s <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>, <span class="inlinecode"><span class="id" title="var">beq_nat</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">beq_nat</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>.

<div class="paragraph"> </div>

   Demonstração:
   <font size=-2>&#9744;</font>
 
<div class="paragraph"> </div>

<a name="lab32"></a><h4 class="section">Exercício: nível 3, opcional (beq_nat_trans)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">beq_nat_trans</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> = <span class="id" title="var">true</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> <span class="id" title="var">n</span> <span class="id" title="var">p</span> = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab33"></a><h4 class="section">Exercício: nível 3, avançado (split_combine)</h4>
 Acabamos de provar que, para todas as listas de pares, <span class="inlinecode"><span class="id" title="var">combine</span></span> 
    é o inverso de <span class="inlinecode"><span class="id" title="tactic">split</span></span>. Como você formalizaria a afirmação de que 
    <span class="inlinecode"><span class="id" title="tactic">split</span></span> é o inverso de <span class="inlinecode"><span class="id" title="var">combine</span></span>? Quando essa propriedade é verdadeira?

<div class="paragraph"> </div>

    Completar a definição de <span class="inlinecode"><span class="id" title="var">split_combine_statement</span></span> abaixo com uma
    propriedade que determina que <span class="inlinecode"><span class="id" title="tactic">split</span></span> é o inverso de <span class="inlinecode"><span class="id" title="var">combine</span></span>. Em seguida,
    demonstrar que a propriedade se mantém. (Evite usar <span class="inlinecode"><span class="id" title="tactic">intros</span></span> mais do que o
    necessário para não perder a hipótese indutiva mais geral. Dica: qual
    propriedade você precisa de <span class="inlinecode"><span class="id" title="var">l1</span></span> e <span class="inlinecode"><span class="id" title="var">l2</span></span> para que <span class="inlinecode"><span class="id" title="tactic">split</span></span> <span class="inlinecode"><span class="id" title="var">combine</span></span> <span class="inlinecode"><span class="id" title="var">l1</span></span> <span class="inlinecode"><span class="id" title="var">l2</span></span> <span class="inlinecode">=</span>
    <span class="inlinecode">(<span class="id" title="var">l1</span>,<span class="id" title="var">l2</span>)</span> seja verdadeira?) 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">split_combine_statement</span> : <span class="id" title="keyword">Prop</span> :=<br/>
 <span class="id" title="var">admit</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">split_combine</span> : <span class="id" title="var">split_combine_statement</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab34"></a><h4 class="section">Exercício: nível 3 (override_permute)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">override_permute</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span>:<span class="id" title="keyword">Type</span>) <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">k1</span> <span class="id" title="var">k2</span> <span class="id" title="var">k3</span> (<span class="id" title="var">f</span> : <span class="id" title="var">nat</span>→<span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">beq_nat</span> <span class="id" title="var">k2</span> <span class="id" title="var">k1</span> = <span class="id" title="var">false</span> →<br/>
&nbsp;&nbsp;(<span class="id" title="var">override</span> (<span class="id" title="var">override</span> <span class="id" title="var">f</span> <span class="id" title="var">k2</span> <span class="id" title="var">x2</span>) <span class="id" title="var">k1</span> <span class="id" title="var">x1</span>) <span class="id" title="var">k3</span> = (<span class="id" title="var">override</span> (<span class="id" title="var">override</span> <span class="id" title="var">f</span> <span class="id" title="var">k1</span> <span class="id" title="var">x1</span>) <span class="id" title="var">k2</span> <span class="id" title="var">x2</span>) <span class="id" title="var">k3</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab35"></a><h4 class="section">Exercício: nível 3, avançado (filter_exercise)</h4>
 Este exercício é um pouco desafiador. Preste atenção à forma da sua hipótese de indução. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">filter_exercise</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">test</span> : <span class="id" title="var">X</span> → <span class="id" title="var">bool</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) (<span class="id" title="var">l</span> <span class="id" title="var">lf</span> : <span class="id" title="var">list</span> <span class="id" title="var">X</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">filter</span> <span class="id" title="var">test</span> <span class="id" title="var">l</span> = <span class="id" title="var">x</span> :: <span class="id" title="var">lf</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">test</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a name="lab36"></a><h4 class="section">Exercício: nível 4, avançado (forall_exists_challenge)</h4>
 Defina dois <span class="inlinecode"><span class="id" title="var">Fixpoints</span></span> recursivos, <span class="inlinecode"><span class="id" title="var">forallb</span></span> e <span class="inlinecode"><span class="id" title="var">existsb</span></span>. O primeiro
    testa se cada elemento em uma lista satisfaz um dado predicado:
      forallb oddb <span class="inlinecode">1;3;5;7;9</span> = true

<div class="paragraph"> </div>

      forallb negb <span class="inlinecode"><span class="id" title="var">false</span>;<span class="id" title="var">false</span></span> = true

<div class="paragraph"> </div>

      forallb evenb <span class="inlinecode">0;2;4;5</span> = false

<div class="paragraph"> </div>

      forallb (beq_nat 5) <font size=-2>&#9744;</font> = true
    O segundo verifica se existe um elemento na lista que
    satisfaz um dado predicado:
      existsb (beq_nat 5) <span class="inlinecode">0;2;3;6</span> = false

<div class="paragraph"> </div>

      existsb (andb true) <span class="inlinecode"><span class="id" title="var">true</span>;<span class="id" title="var">true</span>;<span class="id" title="var">false</span></span> = true

<div class="paragraph"> </div>

      existsb oddb <span class="inlinecode">1;0;0;0;0;3</span> = true

<div class="paragraph"> </div>

      existsb evenb <font size=-2>&#9744;</font> = false
    Depois, defina uma versão <i>não-recursiva</i> de <span class="inlinecode"><span class="id" title="var">existsb</span></span> -- chame de
    <span class="inlinecode"><span class="id" title="var">existsb&acute;</span></span> -- usando <span class="inlinecode"><span class="id" title="var">forallb</span></span> e <span class="inlinecode"><span class="id" title="var">negb</span></span>.

<div class="paragraph"> </div>

    Prove o teorema <span class="inlinecode"><span class="id" title="var">existsb_existsb&acute;</span></span> que <span class="inlinecode"><span class="id" title="var">existsb&acute;</span></span> e <span class="inlinecode"><span class="id" title="var">existsb</span></span> tem
    o mesmo comportamento.

</div>
<div class="code">

<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>
<hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>